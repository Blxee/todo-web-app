{"ast":null,"code":"import _toConsumableArray from\"/data/data/com.termux/files/home/programs/js/todo_api/todo_frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/data/data/com.termux/files/home/programs/js/todo_api/todo_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useEffect}from\"react\";import{Button,Form,InputGroup}from\"react-bootstrap\";import{AiOutlinePlus}from'react-icons/ai';import TodoList from'./TodoList';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];useEffect(function(){var refresh=function refresh(){fetch('api/?format=json').then(function(res){return res.json();}).then(function(res){return setTodos(res);});};refresh();setInterval(refresh,1000);},[]);var addTodo=useRef();function handleAddTodo(){var newTodos=_toConsumableArray(todos);var name=addTodo.current.value;if(name===\"\"){return;}var id=todos.map(function(_ref){var id=_ref.id;return id;}).reduce(function(pre,cur){return cur>pre?cur:pre;},0);id++;var todo={id:id,name:name,checked:false};newTodos.push(todo);setTodos(newTodos);addTodo.current.value=null;fetch(\"api/\".concat(todo.id,\"/\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(todo)});}function checkTodo(todoId){var newTodos=_toConsumableArray(todos);var target=newTodos.find(function(_ref2){var id=_ref2.id;return todoId===id;});target.checked=!target.checked;setTodos(newTodos);fetch(\"api/\".concat(todoId,\"/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(target)}).then(function(res){return res.json();}).then(function(res){return setTodos(res);});}function deleteTodo(todoId){var newTodos=_toConsumableArray(todos);newTodos=newTodos.filter(function(_ref3){var id=_ref3.id;return todoId!==id;});setTodos(newTodos);fetch(\"api/\".concat(todoId,\"/\"),{method:'DELETE'});}function editTodo(todoId,newName){var newTodos=_toConsumableArray(todos);var target=newTodos.find(function(_ref4){var id=_ref4.id;return todoId===id;});target.name=newName;fetch(\"api/\".concat(todoId,\"/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(target)}).then(function(res){return res.json();}).then(function(res){return setTodos(res);});}function handleClearCkecked(){setTodos(function(oldTodos){return oldTodos.filter(function(_ref5){var checked=_ref5.checked,id=_ref5.id;if(checked){fetch(\"api/\".concat(id,\"/\"),{method:'DELETE'});}return!checked;});});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"There are \",todos.filter(function(_ref6){var checked=_ref6.checked;return!checked;}).length,\" tasks left todo!\"]}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Form.Control,{ref:addTodo,type:\"text\",maxLength:255}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleAddTodo,children:/*#__PURE__*/_jsx(AiOutlinePlus,{})})]}),/*#__PURE__*/_jsx(Button,{onClick:handleClearCkecked,className:\"clear-btn w-100\",variant:\"info\",children:\"Clear Checked\"}),/*#__PURE__*/_jsx(TodoList,{todos:todos,actions:{checkTodo:checkTodo,deleteTodo:deleteTodo,editTodo:editTodo}})]});}","map":{"version":3,"names":["useState","useRef","useEffect","Button","Form","InputGroup","AiOutlinePlus","TodoList","App","todos","setTodos","refresh","fetch","then","res","json","setInterval","addTodo","handleAddTodo","newTodos","name","current","value","id","map","reduce","pre","cur","todo","checked","push","method","headers","body","JSON","stringify","checkTodo","todoId","target","find","deleteTodo","filter","editTodo","newName","handleClearCkecked","oldTodos","length"],"sources":["/data/data/com.termux/files/home/programs/js/todo_api/todo_frontend/src/App.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\nimport { Button, Form, InputGroup } from \"react-bootstrap\";\nimport { AiOutlinePlus } from 'react-icons/ai'\nimport TodoList from './TodoList';\n\nexport default function App() {\n\n  const [todos, setTodos] = useState([]);\n\n  useEffect(() => {\n    const refresh = () => {\n      fetch('api/?format=json')\n        .then(res => res.json())\n        .then(res => setTodos(res))\n    }\n    refresh()\n    setInterval(refresh, 1000)\n  }, [])\n\n  const addTodo = useRef();\n\n  function handleAddTodo() {\n    const newTodos = [...todos]\n    const name = addTodo.current.value;\n    if (name === \"\") {\n      return\n    }\n    let id = todos\n      .map(({ id }) => id)\n      .reduce((pre, cur) => cur > pre ? cur : pre, 0)\n    id++\n    const todo = {\n      id,\n      name,\n      checked: false\n    }\n\n    newTodos.push(todo)\n    setTodos(newTodos)\n    addTodo.current.value = null\n\n    fetch(`api/${todo.id}/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(todo),\n    })\n  }\n\n  function checkTodo(todoId) {\n    const newTodos = [...todos]\n    const target = newTodos.find(({ id }) => todoId === id)\n    target.checked = !target.checked\n    setTodos(newTodos)\n\n    fetch(`api/${todoId}/`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(target),\n    })\n      .then(res => res.json())\n      .then(res => setTodos(res))\n  }\n\n  function deleteTodo(todoId) {\n    let newTodos = [...todos]\n    newTodos = newTodos.filter(({ id }) => todoId !== id)\n    setTodos(newTodos)\n\n    fetch(`api/${todoId}/`, { method: 'DELETE' })\n  }\n\n  function editTodo(todoId, newName) {\n    let newTodos = [...todos]\n    const target = newTodos.find(({ id }) => todoId === id)\n    target.name = newName\n\n    fetch(`api/${todoId}/`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(target),\n    })\n      .then(res => res.json())\n      .then(res => setTodos(res))\n  }\n\n  function handleClearCkecked() {\n    setTodos(oldTodos => {\n      return oldTodos.filter(({ checked, id }) => {\n        if (checked) {\n          fetch(`api/${id}/`, { method: 'DELETE' })\n        }\n        return !checked\n      })\n    })\n  }\n\n  return (\n    <>\n      <h1>There are {todos.filter(({ checked }) => !checked).length} tasks left todo!</h1>\n\n      <InputGroup>\n        <Form.Control\n          ref={addTodo}\n          type=\"text\"\n          maxLength={255}\n        />\n\n        <Button variant=\"secondary\" onClick={handleAddTodo}>\n          <AiOutlinePlus />\n        </Button>\n      </InputGroup>\n\n      <Button\n        onClick={handleClearCkecked}\n        className=\"clear-btn w-100\"\n        variant=\"info\"\n      >\n        Clear Checked\n      </Button>\n\n      <TodoList\n        todos={todos}\n        actions={{ checkTodo, deleteTodo, editTodo }}\n      />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}